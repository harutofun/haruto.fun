<!-- status -->
<div class="status_div">
<a class="progress_button" href="https://github.com/harutofun" target="_blank">
    <div class="status_front">
    <div class="progress-container">
        <div class="progress-label" id="progress-label">0/0</div>
        <div class="progress-bar" id="progress-bar"></div>
        <div class="progress-percentage" id="progress-percentage">0%</div>
    </div>
    <img class="status_issues" src="assets/img/home/status/status_4.png" alt="Status Issues">
    <img class="status_gif" src="assets/img/home/status/status_nosignal.gif" alt="Status Gif" id="status_gif">
    </div>
    <div class="status_back">
    <img src="assets/img/home/status/status_flipped.png" alt="Flipped Image">
    </div>
</a>
</div>

<style>



/* status container */
.status_div {
    position: absolute;
    width: 196px;
    height: 196px;
    z-index: 9;
    display: grid;
    place-items: center;
    top: -30px;
    left: 5vw;
}

/* status background gif */
.status_gif {
    border-radius: 5px;
    top: 0px;
    left: 0px;
    position: absolute;
    z-index: 9;
}

/* status issues image */
.status_issues {
    top: 165px;
    left: 14px;
    position: absolute;
    z-index: 10;
}

/* status progress container */
.progress-container {
    top: 15px;
    left: 10px;
    z-index: 10;
    position: absolute;
    display: flex;
    align-items: center;
    gap: 5px;
    width: 100%;
    max-width: 177px;
}

/* status progress characteres */
.progress-label {
    font-family: uto-font, sans-serif;
    font-size: 10px;
    color: white;
    background-color: black;
    text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
}

.progress-percentage {
    font-family: uto-font, sans-serif;
    font-size: 10px;
    color: white;
    background-color: black;
    text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
}

/* status progress background */
.progress-bar {
    flex-grow: 1;
    height: 10px;
    background-color: black;
    border-radius: 2px;
    outline: 1px solid black;
    display: flex;
}

/* status progress done */
.progress-segment {
    flex-grow: 1;
    background-color: #8957e5; 
    margin-right: -1px; /* change this to -1 or 0 or 2 depending on the amount of tasks */
    transition: background-color 0.3s ease-in-out;
}

/* status progress border */
.progress-segment:first-child {
    border-top-left-radius: 4px; /* must be 2x the margin right */
    border-bottom-left-radius: 4px;
}
.progress-segment:last-child {
    border-top-right-radius: 4px;
    border-bottom-right-radius: 4px;
    margin-right: 0;
}

/* status progress to-do */
.progress-segment:not(.completed) {
    background-color: #322a54;
}

/* status turn card */
.status_front, .status_back {
    position: absolute;
    width: 196px;
    height: 196px;
    transition: transform 0.3s;
    backface-visibility: hidden;
}
.status_front {
    background: black; 
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.status_back {
    background: black; 
    transform: rotateY(180deg);
    display: flex;
    align-items: center;
    justify-content: center;
}
.status_div:hover .status_front {
    transform: rotateY(180deg);
}
.status_div:hover .status_back {
    transform: rotateY(360deg);
}

.status_div:active .status_back{
    transition: scale .1s;
    scale: 0.9;
}

</style>

<script>
// status gif
let status_gif_ = document.getElementById('status_gif');
let status_gifs = [
    'assets/img/home/status/status_cook.gif',
    'assets/img/home/status/status_sleep.gif',
    'assets/img/home/status/status_idle.gif',
    'assets/img/home/status/status_dialogues.gif',
    'assets/img/home/status/status_idle_touch.gif',
    'assets/img/home/status/status_ramen.gif',
];
setInterval(function() {
    let random = Math.floor(Math.random() * status_gifs.length);
    status_gif_.src = status_gifs[random];
}, 6000);

// status progress bar
const totalIssues = 20;
const completedIssues = 2;
const percentage = totalIssues > 0 ? Math.round((completedIssues / totalIssues) * 100) : 0;
document.getElementById('progress-label').textContent = `${completedIssues}/${totalIssues}`;
document.getElementById('progress-percentage').textContent = `${percentage}%`;
const progressBar = document.getElementById('progress-bar');
progressBar.innerHTML = '';
for (let i = 0; i < totalIssues; i++) {
  const segment = document.createElement('div');
  segment.classList.add('progress-segment');
  if (i < completedIssues) { segment.classList.add('completed');}
  progressBar.appendChild(segment);
}


// status container parallax movement
applyParallaxEffect('.status_div', 2, 1);
</script>